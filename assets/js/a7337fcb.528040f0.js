"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9985],{7761:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var t=n(74848),i=n(28453);const o={sidebar_position:27},s="Stepper Motor",d={id:"UNO-R4-Starter-Kit/Stepper-Motor",title:"Stepper Motor",description:"Stepper motors are widely used in various applications, from robotics to 3D printers, due to their precise control over rotation. In this tutorial, we will learn how to control a 28BYJ-48 stepper motor using an Arduino R4 and the L293D motor driver.",source:"@site/docs/UNO-R4-Starter-Kit/Stepper-Motor.md",sourceDirName:"UNO-R4-Starter-Kit",slug:"/UNO-R4-Starter-Kit/Stepper-Motor",permalink:"/UNO-R4-Starter-Kit/Stepper-Motor",draft:!1,unlisted:!1,editUrl:"https://github.com/carobot/learn.carobot.ca/tree/main/docs/UNO-R4-Starter-Kit/Stepper-Motor.md",tags:[],version:"current",sidebarPosition:27,frontMatter:{sidebar_position:27},sidebar:"tutorialSidebar",previous:{title:"DC Motor and Relay",permalink:"/UNO-R4-Starter-Kit/DC-Motor"},next:{title:"CAROBOT Arduino Discovery Starter Kit (Lite) Guide",permalink:"/discovery-kit/"}},l={},c=[{value:"Materials",id:"materials",level:2},{value:"Instructions",id:"instructions",level:2},{value:"ULN2003 Driver to the Arduino:",id:"uln2003-driver-to-the-arduino",level:4},{value:"Materials",id:"materials-1",level:2},{value:"Instructions",id:"instructions-1",level:2},{value:"KY022 to Arduino R4",id:"ky022-to-arduino-r4",level:4},{value:"Materials",id:"materials-2",level:2},{value:"Instructions",id:"instructions-2",level:2},{value:"Rotary Encoder to the Arduino",id:"rotary-encoder-to-the-arduino",level:4}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"stepper-motor",children:"Stepper Motor"}),"\n",(0,t.jsx)(r.p,{children:"Stepper motors are widely used in various applications, from robotics to 3D printers, due to their precise control over rotation. In this tutorial, we will learn how to control a 28BYJ-48 stepper motor using an Arduino R4 and the L293D motor driver.\r\nThe 28BYJ-48 stepper motor is a popular choice among hobbyists and makers for its low cost and ease of use. However, it requires a motor driver to interface with an Arduino, as the Arduino alone cannot provide enough current to drive the motor."}),"\n",(0,t.jsx)(r.h2,{id:"materials",children:"Materials"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Component"}),(0,t.jsx)(r.th,{children:"Image"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Breadboard"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/breadboard.webp",width:"200",height:"150"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Jumper wires"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/jumper-wires.webp",width:"200",height:"150"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Arduino Uno R4 Minima"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/arduino-r4-minima.webp",width:"190",height:"150"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"ULN2003 Stepper Motor Driver Board and 28BYJ-48 Stepper Motor"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/stepper-and-driver.jpg",width:"200",height:"200"})})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"instructions",children:"Instructions"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Connect the four wires from the stepper motor to the OUT1, OUT2, OUT3, and OUT4 pins on the ULN2003 driver. Make the following connections using the breadboard and jumper wires."}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"uln2003-driver-to-the-arduino",children:"ULN2003 Driver to the Arduino:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"+"})," to 5V"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"-"})," to GND"]}),"\n",(0,t.jsx)(r.li,{children:"IN1 to pin 8"}),"\n",(0,t.jsx)(r.li,{children:"IN2 to pin 9"}),"\n",(0,t.jsx)(r.li,{children:"IN3 to pin 10"}),"\n",(0,t.jsx)(r.li,{children:"IN4 to pin 11"}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/stepper-1.png",width:"600",height:"470"}),"\n",(0,t.jsxs)(r.ol,{start:"2",children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:'Download the "Stepper.h" library on the Library Manager.'}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Paste the following code into your main Arduino sketch:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:'#include <Stepper.h>\r\n\r\nconst int stepsPerRevolution = 2048;\r\nconst int rolePerMinute = 15;\r\n\r\n\r\nStepper myStepper(stepsPerRevolution, 8, 10, 9, 11);\r\n\r\nvoid setup() {\r\n  myStepper.setSpeed(rolePerMinute);\r\n  \r\n  Serial.begin(9600);\r\n}\r\n\r\nvoid loop() {  \r\n  \r\n  Serial.println("clockwise");\r\n  myStepper.step(stepsPerRevolution);\r\n  delay(500);\r\n\r\n  \r\n  Serial.println("counterclockwise");\r\n  myStepper.step(-stepsPerRevolution);\r\n  delay(500);\r\n}\n'})}),"\n",(0,t.jsxs)(r.ol,{start:"4",children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Connect your Arduino to your laptop using a USB-C cable and upload the code to the arduino."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Test! Watch the stepper motor spin!"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h1,{id:"controlling-a-stepper-with-an-ir-remote",children:"Controlling A Stepper With An IR Remote"}),"\n",(0,t.jsx)(r.p,{children:"In this tutorial, we'll learn how to control a stepper motor using an IR remote control with an Arduino. Stepper motors are commonly used in projects that require precise movement or rotation. By adding IR remote control functionality, we can wirelessly control the stepper motor's direction and speed."}),"\n",(0,t.jsx)(r.h2,{id:"materials-1",children:"Materials"}),"\n",(0,t.jsx)(r.p,{children:"In addition to everything from the previous section, you will also need:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Component"}),(0,t.jsx)(r.th,{children:"Image"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"KY022 IR Receiver Module + Remote"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/KY022.jpeg",width:"190",height:"190"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"IR Remote Control"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/ir-remote-control.jpg",width:"190",height:"190"})})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"instructions-1",children:"Instructions"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Add the following connections to your current setup:"}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"ky022-to-arduino-r4",children:"KY022 to Arduino R4"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"S to pin 12"}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"+"})," to 5V"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"-"})," to GND"]}),"\n",(0,t.jsx)(r.li,{children:"Switch the input pins for pins 8 and 9 on the Arduino R4."}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/stepper-2.png",width:"650",height:"400"}),"\n",(0,t.jsxs)(r.ol,{start:"2",children:["\n",(0,t.jsx)(r.li,{children:"Paste the following code into your main Arduino sketch:"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:'#include "Stepper.h"\r\n#include "IRremote.h"\r\n\r\n\r\n#define STEPS 32\r\nint Steps2Take;\r\nint receiver = 12;\r\n\r\n\r\nStepper small_stepper(STEPS, 8, 9, 10, 11);\r\nIRrecv irrecv(receiver);\r\ndecode_results results;\r\n\r\nvoid setup() {\r\n  Serial.begin(9600);\r\n  irrecv.enableIRIn();  \r\n}\r\n\r\nvoid loop() {\r\n  if (irrecv.decode()) \r\n    Serial.println(irrecv.decodedIRData.decodedRawData, HEX);\r\n\r\n  {\r\n    switch (irrecv.decodedIRData.decodedRawData)\r\n\r\n    {\r\n\r\n      case 0xB946FF00:               \r\n        small_stepper.setSpeed(500); \r\n        Steps2Take = 2048;          \r\n        small_stepper.step(Steps2Take);\r\n        delay(2000);\r\n        break;\r\n\r\n      case 0xEA15FF00: \r\n        small_stepper.setSpeed(500);\r\n        Steps2Take = -2048;\r\n        small_stepper.step(Steps2Take);\r\n        delay(2000);\r\n        break;\r\n    }\r\n\r\n    irrecv.resume();  \r\n    digitalWrite(8, LOW);\r\n    digitalWrite(9, LOW);\r\n    digitalWrite(10, LOW);\r\n    digitalWrite(11, LOW);\r\n  }\r\n\r\n\r\n} \n'})}),"\n",(0,t.jsxs)(r.ol,{start:"3",children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Connect your Arduino to your laptop using a USB-C cable and upload the code to the arduino."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Test! Use the IR Remote and see if the stepper motor spins."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h1,{id:"controlling-with-a-rotary-encoder",children:"Controlling With A Rotary Encoder"}),"\n",(0,t.jsx)(r.p,{children:"Welcome to this tutorial on controlling a 28BYJ-48 stepper motor using a ULN2003 motor driver and an Arduino, guided by a rotary encoder. Stepper motors are precise control devices commonly used in robotics, CNC machines, and automation projects where precise movement is required. Combining a stepper motor with a rotary encoder allows for interactive control, making it possible to adjust the motor's position and speed with a simple twist of a knob."}),"\n",(0,t.jsx)(r.h2,{id:"materials-2",children:"Materials"}),"\n",(0,t.jsx)(r.p,{children:"In addition to everything from the firs section, you will also need:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Component"}),(0,t.jsx)(r.th,{children:"Image"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Rotary Encoder Module"}),(0,t.jsx)(r.td,{children:(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/rotary-encoder.webp",width:"200",height:"200"})})]})})]}),"\n",(0,t.jsx)(r.h2,{id:"instructions-2",children:"Instructions"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Add the following connections to the setup from the first section."}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"rotary-encoder-to-the-arduino",children:"Rotary Encoder to the Arduino"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"GND to GND"}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"+"})," to 5V"]}),"\n",(0,t.jsx)(r.li,{children:"SW to pin 4"}),"\n",(0,t.jsx)(r.li,{children:"DT to pin 3"}),"\n",(0,t.jsx)(r.li,{children:"CLK to pin 2"}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/img/docs/UNO-R4-Starter-Kit/stepper-3.png",width:"700",height:"370"}),"\n",(0,t.jsxs)(r.ol,{start:"2",children:["\n",(0,t.jsx)(r.li,{children:"Paste the following code into your main Arduino sketch:"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:'#include <ezButton.h>  // the library to use for SW pin\r\n#include <Stepper.h>   // the library for the stepper motor\r\n\r\n#define CLK_PIN 2\r\n#define DT_PIN 3\r\n#define SW_PIN 4\r\n\r\n#define DIRECTION_CW 0   // clockwise direction\r\n#define DIRECTION_CCW 1  // counter-clockwise direction\r\n\r\nconst int stepsPerRevolution = 2048;  // 28BYJ-48 has 2048 steps per revolution\r\nconst int maxSpeed = 15;              // Maximum speed (RPM) for the stepper motor\r\n\r\nint counter = 0;\r\nint direction = DIRECTION_CW;\r\nint CLK_state;\r\nint prev_CLK_state;\r\n\r\nStepper myStepper(stepsPerRevolution, 8, 9, 10, 11);  // Initialize the stepper library on pins 8 through 11\r\nezButton button(SW_PIN);                              // create ezButton object that attach to pin 4\r\n\r\nvoid setup() {\r\n  Serial.begin(9600);\r\n\r\n  // configure encoder pins as inputs\r\n  pinMode(CLK_PIN, INPUT);\r\n  pinMode(DT_PIN, INPUT);\r\n  button.setDebounceTime(50);  // set debounce time to 50 milliseconds\r\n\r\n  // read the initial state of the rotary encoder\'s CLK pin\r\n  prev_CLK_state = digitalRead(CLK_PIN);\r\n\r\n  // Set the motor speed\r\n  myStepper.setSpeed(maxSpeed);\r\n}\r\n\r\nvoid loop() {\r\n  button.loop();  // MUST call the loop() function first\r\n\r\n  // read the current state of the rotary encoder\'s CLK pin\r\n  CLK_state = digitalRead(CLK_PIN);\r\n\r\n  // If the state of CLK is changed, then pulse occurred\r\n  // React to only the rising edge (from LOW to HIGH) to avoid double count\r\n  if (CLK_state != prev_CLK_state && CLK_state == HIGH) {\r\n    // if the DT state is HIGH\r\n    // the encoder is rotating in counter-clockwise direction => decrease the counter\r\n    if (digitalRead(DT_PIN) == HIGH) {\r\n      if (counter > -9) {\r\n        counter--;\r\n        direction = DIRECTION_CCW;\r\n      }\r\n    } else {\r\n      // the encoder is rotating in clockwise direction => increase the counter\r\n      if (counter < 9) {\r\n        counter++;\r\n        direction = DIRECTION_CW;\r\n      }\r\n    }\r\n\r\n    Serial.print("DIRECTION: ");\r\n    if (direction == DIRECTION_CW)\r\n      Serial.print("Clockwise");\r\n    else\r\n      Serial.print("Counter-clockwise");\r\n\r\n    Serial.print(" | COUNTER: ");\r\n    Serial.println(counter);\r\n\r\n    // Control the stepper motor based on the counter value\r\n    if (direction == DIRECTION_CW) {\r\n      myStepper.step(stepsPerRevolution / 100);  // Move a small step clockwise\r\n    } else {\r\n      myStepper.step(-stepsPerRevolution / 100);  // Move a small step counter-clockwise\r\n    }\r\n  }\r\n\r\n  // save last CLK state\r\n  prev_CLK_state = CLK_state;\r\n\r\n  if (button.isPressed()) {\r\n    Serial.println("The button is pressed");\r\n    counter = 0;            // Reset counter when the button is pressed\r\n  }\r\n}\n'})}),"\n",(0,t.jsxs)(r.ol,{start:"3",children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Connect your Arduino to your laptop using a USB-C cable and upload the code to the arduino."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Test! Twist the rotary encoder and press the button! Observe the stepper motors movements and the serial monitor to track the counter."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>d});var t=n(96540);const i={},o=t.createContext(i);function s(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);